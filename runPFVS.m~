%% generate datalist and solutionlist
domainFile='geopack';
voxelSize=10*1e-6;
numPartitions=[2,2,2];
            numIterations=50;
            relaxFlag=false;
            relaxIndex=3;
            precondFlag=false;
            pressureBasisFlag=false;
            upscalingFactor=2;
            agglomFlag=true;
            microFlag=false;
            agmgFlag=true; %most issues with agmg have been solved. only deactivate this if plot flag is on and you need cross section face data
            unixFlag=true;         
            condDumpSerialiserFlag=false;
            diskDumpSerialiserFlag=false;
            
            preProcDiskDumpFlag=false;
            simulationDiskDumpFlag=false;
            
            YDFlag=false;
            runYDInSerial=true;
            runPartsInSerial=true;

    %         delete(gcp('nocreate'))
    %         parpool('local',16)
            plotFlag=false;
        %     clf(1);clf(2);clf(3);clf(4);
%             figure(3)
%             hold on
%             figure(4)
%             hold on
%             figure(5)
%             subplot(numPartitions,2,1)
%             figure(6)
%             subplot(numPartitions+1,2,1)
            [data] = decompAgglomProto3DProto3...
                                    (domainFile{i},truncx,truncy,truncz,alphaList(i),voxelSizeList(i),YDFlag,dCalcFlag,dFile,dSaveFlag...
                                    ,numPartitions,dualLength,numIterations,relaxFlag,relaxIndex,precondFlag,pressureBasisFlag,upscalingFactor...
                                    ,agglomFlag,microFlag,agmgFlag,unixFlag,condDumpSerialiserFlag,diskDumpSerialiserFlag,preProcDiskDumpFlag,simulationDiskDumpFlag,runYDInSerial,runPartsInSerial,plotFlag);
%             solnList{i}=[data.timeVec,data.permVec,data.resVec];
%             Data=[timeVec,permVec,resVec];
            save([domainFile{i},'Data',num2str(numPartitions(j)),'PartsDL',num2str(dualLength),'Par.mat'],'data') 





